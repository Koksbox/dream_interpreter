<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò–ò —Å–æ–Ω–Ω–∏–∫ ‚Äî –ß–∞—Ç</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body class="chat-body">
    <div class="chat-container">
        <div class="chat-header">–ò–ò —Å–æ–Ω–Ω–∏–∫ ‚Ä¢ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</div>
        <div class="messages" id="messages">
            {% for msg in messages %}
                <div class="message {% if msg.is_user %}user{% else %}bot{% endif %}">
                    {{ msg.content }}
                </div>
            {% endfor %}
        </div>
        <div class="input-area">
            <input type="text" id="user-input" placeholder="–û–ø–∏—à–∏ —Å–≤–æ–π —Å–æ–Ω...">
            <button id="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <!-- –ü–æ–∑–∂–µ: <button id="mic-btn">üé§</button> -->
        </div>
    </div>

    <script>
        document.getElementById('send-btn').onclick = async () => {
            const input = document.getElementById('user-input');
            const text = input.value.trim();
            if (!text) return;
            input.value = '';

            // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ UI
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `<div class="message user">${text}</div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            const res = await fetch('/api/message/', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({text})
            });
            const data = await res.json();
            messagesDiv.innerHTML += `<div class="message bot">${data.reply}</div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        };
    </script>
</body>
</html>